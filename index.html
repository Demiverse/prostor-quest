<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
    <title>–ü—Ä–æ—Å—Ç–æ—Ä: –ö–æ–¥ –ï–¥–∏–Ω—Å—Ç–≤–∞ ‚Äî VK Mini App</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚ö°</text></svg>">
    <link rel="stylesheet" href="style.css" />
    <!-- VK Bridge -->
    <script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
</head>
<body>
<div class="app" id="app">
    <!-- –ó–∞–≥—Ä—É–∑–∫–∞ -->
    <div id="screen-loading" class="screen active">
        <div class="loading-content">
            <div class="logo">–ü–†–û–°–¢–û–†</div>
            <div class="loading-bar"><div class="loading-progress"></div></div>
            <p class="loading-text">–ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ —Ç–≤–æ—Ä—á–µ—Å–∫–æ–º—É —è–¥—Ä—É...</p>
            <div class="platform-badge" id="platform-badge">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...</div>
        </div>
    </div>

    <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω -->
    <div id="screen-game" class="screen">
        <div class="header">
            <button class="menu-btn" onclick="toggleMenu()">‚ò∞</button>
            <div class="header-title">–ö–æ–¥ –ï–¥–∏–Ω—Å—Ç–≤–∞</div>
            <button class="sound-btn" id="sound-toggle" onclick="toggleSound()">üîä</button>
        </div>

        <div class="game-content">
            <div class="character-container">
                <div id="character-image" class="character-image">
                    <span class="character-emoji">‚ö°</span>
                </div>
            </div>

            <div class="dialog-container fade-in">
                <div class="character-name" id="character-name">–°–ò–°–¢–ï–ú–ê</div>
                <div class="dialog-text" id="dialog-text">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∏–∞–ª–æ–≥–∞...</div>
            </div>

            <div class="choices-container" id="choices-container"></div>
        </div>

        <div class="game-footer">
            <div class="progress-container">
                <div class="progress-text">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ: <span id="progress-percent">0</span>%</div>
                <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∏ -->
    <div id="screen-puzzle" class="screen">
        <div class="header">
            <button class="back-btn" onclick="backToGame()">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="header-title" id="puzzle-title">–ò—Å–ø—ã—Ç–∞–Ω–∏–µ</div>
            <div class="header-spacer"></div>
        </div>

        <div class="puzzle-content">
            <div class="puzzle-header">
                <p id="puzzle-description">–†–µ—à–∏ –∑–∞–¥–∞–Ω–∏–µ, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å</p>
            </div>
            <div class="puzzle-body" id="puzzle-body"></div>
            <div class="puzzle-actions">
                <button class="puzzle-button" onclick="checkPuzzle()"><span class="btn-icon">‚úì</span><span class="btn-text">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</span></button>
                <button class="puzzle-button secondary" onclick="showHint()"><span class="btn-icon">üí°</span><span class="btn-text">–ü–æ–¥—Å–∫–∞–∑–∫–∞</span></button>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –ø–æ–±–µ–¥—ã -->
    <div id="screen-victory" class="screen">
        <div class="victory-content">
            <div class="victory-animation">üéâ</div>
            <h1>–ú–ò–°–°–ò–Ø –í–´–ü–û–õ–ù–ï–ù–ê!</h1>
            <p>–¢—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª –µ–¥–∏–Ω—Å—Ç–≤–æ –ü—Ä–æ—Å—Ç–æ—Ä–∞</p>
            <div class="victory-stats">
                <div class="stat-item"><span class="stat-icon">‚è±Ô∏è</span><span class="stat-value" id="completion-time">00:00</span></div>
                <div class="stat-item"><span class="stat-icon">‚úÖ</span><span class="stat-value" id="puzzles-completed">0/0</span></div>
            </div>
            <div class="victory-actions">
                <button class="victory-btn primary" onclick="shareResult()"><span class="btn-icon">üì§</span><span class="btn-text">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ø–æ–±–µ–¥–æ–π</span></button>
                <button class="victory-btn secondary" onclick="restartGame()"><span class="btn-icon">üîÑ</span><span class="btn-text">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</span></button>
            </div>
        </div>
    </div>

    <!-- –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é -->
    <div id="side-menu" class="side-menu">
        <div class="menu-content">
            <div class="menu-header">
                <h3>–ú–µ–Ω—é</h3>
                <button class="close-menu" onclick="toggleMenu()">√ó</button>
            </div>
            <div class="menu-items">
                <button class="menu-item" onclick="restartGame()">üîÑ –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
                <button class="menu-item" onclick="toggleSound()"><span id="sound-icon">üîä</span> –ó–≤—É–∫</button>
                <button class="menu-item" onclick="shareResult()">üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
                <button class="menu-item" onclick="showHelp()">‚ùì –ü–æ–º–æ—â—å</button>
            </div>
        </div>
    </div>
</div>

<!-- –ê—É–¥–∏–æ -->
<audio id="click-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3" preload="auto"></audio>
<audio id="success-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-success-bell-893.mp3" preload="auto"></audio>
<audio id="background-music" loop preload="auto">
    <source src="https://assets.mixkit.co/music/preview/mixkit-spooky-ambience-927.mp3" type="audio/mpeg">
</audio>

<script src="app.js?v=2.0.0"></script>
</body>
</html>
