<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–°–∏–Ω–≥—É–ª—è—Ä–Ω–æ—Å—Ç—å –ü—Ä–æ—Å—Ç–æ—Ä–∞</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div id="stars"></div>

  <div id="loading" class="screen active">
    <h2>–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –ò—Å—Ç–æ—á–Ω–∏–∫–æ–º...</h2>
    <p id="progress">0%</p>
  </div>

  <div id="intro" class="screen">
    <h1>–°–∏–Ω–≥—É–ª—è—Ä–Ω–æ—Å—Ç—å –ü—Ä–æ—Å—Ç–æ—Ä–∞</h1>
    <button class="btn" onclick="startJourney()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –≤ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ</button>
  </div>

  <div id="dialog" class="screen">
    <div class="dialog-box">
      <p id="dialog-text"></p>
    </div>
    <button class="btn" onclick="showScreen('map')">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
  </div>

  <div id="map" class="screen">
    <h2>–°–æ–∑–≤–µ–∑–¥–∏–µ –ê—Å–ø–µ–∫—Ç–æ–≤</h2>
    <div class="map">
      <div id="prostor" class="planet center" onclick="window.open('https://vk.com/prostor','_blank')">–ü—Ä–æ—Å—Ç–æ—Ä</div>
      <div id="form" class="planet aspect-btn" onclick="enterAspect('form')">–§–æ—Ä–º–∞</div>
      <div id="sound" class="planet aspect-btn" onclick="enterAspect('sound')">–ó–≤—É–∫</div>
      <div id="narrative" class="planet aspect-btn" onclick="enterAspect('narrative')">–ù–∞—Ä—Ä–∞—Ç–∏–≤</div>
      <div id="vision" class="planet aspect-btn" onclick="enterAspect('vision')">–í–∏–¥–µ–Ω–∏–µ</div>
      <div id="will" class="planet aspect-btn" onclick="enterAspect('will')">–í–æ–ª—è</div>
    </div>
  </div>

  <div id="aspect" class="screen">
    <h2 id="aspect-title"></h2>
    <p id="aspect-task"></p>
    <div id="aspect-puzzle"></div>
    <p id="aspect-error" style="color:#ff8080; font-weight:bold; display:none;"></p>
    <button class="btn" id="aspect-submit">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
  </div>

  <div id="final" class="screen">
    <h2>–•—Ä–∞–Ω–∏—Ç–µ–ª—å —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –∏—Å—Ç–∏–Ω—É...</h2>
    <div class="dialog-box">
      <p>
        –û–Ω –∏ –µ—Å—Ç—å –ö—Ä–∏—Ç–∏–∫. ¬´–ö–∞–∂–¥—ã–π –ê—Å–ø–µ–∫—Ç —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω.
        –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Å—å –∫–æ –º–Ω–µ ‚Äî –∏ –º–∏—Ä –æ–±—Ä–µ—Ç—ë—Ç —Ö–∞–æ—Å –±–µ–∑ —É–∑¬ª.
      </p>
    </div>
    <button class="btn" onclick="ending('chaos')">–ü—Ä–∏–Ω—è—Ç—å —Å—Ç–æ—Ä–æ–Ω—É –ö—Ä–∏—Ç–∏–∫–∞</button>
    <button class="btn" onclick="ending('harmony')">–°–∏–ª–æ–π –ê—Å–ø–µ–∫—Ç–æ–≤ –ø–æ–±–µ–¥–∏—Ç—å –µ–≥–æ</button>
  </div>

  <div id="ending" class="screen">
    <h2 id="ending-title"></h2>
    <div class="dialog-box">
      <p id="ending-text"></p>
    </div>
  </div>

  <!-- –ú—É–∑—ã–∫–∞ -->
  <audio id="bg-music" loop>
    <source src="StockTune-Echoes Of The Cosmos_1757438077.mp3" type="audio/mpeg">
  </audio>
  <button id="music-toggle" class="btn" style="position:fixed;top:20px;right:20px;z-index:1000;">üîá</button>

  <!-- vkBridge -->
  <script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
  <script>vkBridge.send('VKWebAppInit');</script>

  <!-- particles.js -->
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <script>
    particlesJS('stars', {
      "particles": {
        "number": {"value": 120},
        "size": {"value": 2},
        "move": {"speed": 0.5},
        "line_linked": {"enable": false},
        "color": {"value": "#ffffff"}
      }
    });
  </script>


  <div id="achievements" class="screen">
    <h2>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
    <ul id="achievements-list"></ul>
    <button class="btn" onclick="showScreen('map')">–ù–∞–∑–∞–¥</button>
  </div>

  <div id="settings" class="screen">
    <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
    <label><input type="checkbox" id="toggle-music" checked> –ú—É–∑—ã–∫–∞</label><br>
    <label><input type="checkbox" id="toggle-animations" checked> –ê–Ω–∏–º–∞—Ü–∏–∏</label><br>
    <button class="btn" onclick="resetProgress()">–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</button><br>
    <button class="btn" onclick="showScreen('map')">–ù–∞–∑–∞–¥</button>
  </div>

  <div id="inventory" class="screen">
    <h2>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
    <ul id="inventory-list"></ul>
    <button class="btn" onclick="showScreen('map')">–ù–∞–∑–∞–¥</button>
  </div>

  <script src="script.js?v=6"></script>

  <div id="item-modal" class="screen" style="background: rgba(0,0,0,0.7);">
    <div class="dialog-box" style="max-width:500px; margin:auto;">
      <h3 id="item-title"></h3>
      <p id="item-desc"></p>
      <div class="dialog-actions">
        <button class="btn" onclick="closeItemModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>
  </div>

</body>
</html>